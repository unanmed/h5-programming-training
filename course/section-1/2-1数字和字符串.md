# 第二章 第一节 数字和字符串

## 一 数字

之前我们已经学习过数字了，但是学到的内容极少，所以这里我们要进行第二次细讲（还会有第三次）

### 整型数字和浮点型数字

在之前的学习中，我们只知道数字就是数字，并没有进行划分。但是，这一次我们要对它进行划分，分为`整型数字`和`浮点型数字`两类

#### 整型数字

整型数字，顾名思义，就是整数。例如`1` `1297`等。不过，整型数字有一个很大的缺点，就是可表示范围较小，是`Number.MIN_SAFE_INTEGER`~`Number.MAX_SAFE_INTEGER`，直接在控制台输入这两个内容就可以知道范围了，转化成数字就是`-2^53+1`~`2^53-1`。我们也不需要知道为什么是这两个数字，只需要知道整型数字有范围和范围的值就行了

#### 浮点型数字

当然，整型数字不能满足我们计算的需求，所以，js还有浮点型数字这个东西，它可以表示小数，同时表示范围也更大，范围是`-Number.MAX_VALUE`~`Number.MAX_VALUE`，最小表示精度为`Number.MIN_VALUE`，所以，浮点型数字在范围上有很大的优势。但是它也有不足的地方，那就是`浮点误差`。你可以试试再控制台输入`0.1 + 0.2 === 0.3`，它的结果会让你很惊讶，实际上，每个编程语言都不可避免这一点，并不是js独有的特性。如何避免暂且不说，会在第三次细讲的时候讲到

### 特殊数字

在js中，有两个特殊的数字——`NaN` 和 `Infinity`

#### NaN

这个东西的全称是`Not a Number`，虽说看起来不是数，但是`typeof NaN === 'number'`（js：特性特性）

##### 判断是否为NaN

我们可以通过一个函数判断一个内容是否是NaN（不能使用 `number === NaN`，因为`NaN !== NaN`）

```js
var num = NaN;
console.log(isNaN(num)); // 输出true
```

没错，这个函数叫`isNaN(number)`，我们一般都会使用这个函数来判断一个数是不是NaN

##### 出现NaN的一般情况

1. 字符串 * 数字出现NaN
2. 字符串和数字相除
3. `Infinity` * 0
4. 一些非规范操作（一般是把数字和不是数字的值相互运算）

#### Infinity

顾名思义，就是无限大。超过`Number.MAX_VALUE`就是`Infinity`，小于`-Number.MAX_VALUE`就是`-Infinity`。它有以下特性

1. 任何数和Infinity相加相减的结果都是Infinity
2. 除了0与Infinity相乘后为NaN外，其余数与Infinity相乘后都是Infinity，正负符号与正常运算相同
3. 除了`0 / Infinity`结果为0外，其余数与Infinity相除结果都是Infinity，正负符号与正常运算相同

### 科学计数法

看例子

```js
1e10 // 就是1*10^10
2.23423e+123 // 就是2.23423*10^123
6.14364e-7 // 就是6.14364*10^-7
```

### 数字可以使用的基础方法

这里需要我们掌握的数字方法有三个——`toString()` `toExponential()` `toFixed()`

#### toString()

这个方法可以将数字转化为字符串。方法有一个参数，可以指定输出进制，范围是`2~36`

```js
var a = 12345;
console.log(a.toString()); // 输出黑色的12345，说明是字符串
console.log(a.toString(2)); // 输出黑色的11000000111001，说明是字符串
console.log(a.toString(16)); // 输出黑色的3039，说明是字符串
```

#### toExponential()

这个方法可以将数字转化为科学计数法形式，并以字符串的形式返回。方法有一个参数，指定小数部分精确位数，末位四舍五入

```js
console.log((123).toExponential()); // 输出黑色的1.23e+2
console.log((123).toExponential(1)); // 输出黑色的1.2e+2
```

#### toFixed()

这个方法会将数字转化为指定位数的小数，四舍五入末位，并以字符串形式返回。方法有一个参数，指定要精确的位数，范围是`0~100`

```js
console.log((123.456789).toFixed(3)); // 输出黑色的123.457
```

### 常用Math对象方法和属性

我们时常要进行数学运算，于是js就内置了一系列数学方法和属性

1. `Math.PI` 返回圆周率`3.141592653589793`
2. `Math.E` 返回自然常数`2.718281828459045`
3. `Math.SQRT2`返回根号2 `1.4142135623730951`
4. `Math.SQRT1_2`返回根号二分之一`0.7071067811865476`
5. `Math.floor(num)`对传入的数向下取整
6. `Math.ceil(num)`对传入的数向上取整
7. `Math.round(num)`对传入的数四舍五入
8. `Math.min(...num)`返回所有传入的数的最小值
9. `Math.max(...num)`返回所有传入的数的最大值
10. `Math.pow(x, y)`返回 `x ** y` 的结果
11. `Math.round()`返回一个随机数
12. `Math.sqrt(num)`返回传入数字的平方根，不必要情况下不建议使用，会影响性能，可用两边同时平方代替
13. `Math.cbrt(num)`返回立方根
14. `Math.abs(num)`返回绝对值
15. `Math.sign(num)`返回数字的符号，负数返回`-1`，0返回`0`，正数返回`1`

## 二 字符串

和数字一样，这是第二次细讲

### 字符串的形式

字符串有两种形式，一种用单引号包裹，另一种用双引号包裹，在js中，这两者没有区别

注意事项：在单引号包裹的字符串中不能使用单引号，如需使用请用`\'`，双引号同理

### 字符串拼接

将两个字符串直接用`+`连接起来即可实现字符串拼接

```js
console.log('hello ' + 'world'); // 输出hello world
```

### parseInt & parseFloat

在js中，有两个内置方法可以帮助我们将字符串转化为数字——`parseInt`和`parseFloat`

这两个方法在使用时，要求必须以数字开头，否则会返回`NaN`。在`parseInt`中，会将字符串中第一个非数字字符前的数字转化为数字型，在`parseFloat`中，会将字符串中第一个不是数字或`.` 或 第二个`.`之前的字符转换为浮点型数字，如果不是浮点型，则会返回整型数字。科学计数法无法正确转化

```js
parseInt('12345啦啦啦'); // 12345
parseInt('啦啦啦12345'); // NaN
parseFloat('123.456啦啦啦'); // 123.456
parseFloat('12.34.56'); // 12.34
```

注意事项：如果传入的值不是`string`，则会先进行`toString()`操作再进行`parse`，如果传入数字，则有可能转化为科学计数法形式而导致输出错误

如果想要parse首字符不是数字的解决办法：

```js
var str = 'lalala12345';
parseInt(str.match(/[0-9]+/)[0]);
var str2 = 'sss123.456';
parseFloat(str2.match(/[0-9.]+/)[0]);
```

如果想要输出所有的数字

```js
var str = '123啦啦啦456sss7.89';
var arr = str.matchAll(/[0-9.]+/g);
arr.forEach(function (v) { console.log(parseFloat(v)); });
```

以上内容不必了解原理，目前阶段会抄就行

### 字符串与数字混合运算

在js中，最奇妙的feature之一就是字符串与数字混合运算了。在计算时，会按照运算优先级逐步运算，当遇到字符串时，如果碰到`- * / %`，js会尝试`parseFloat`，然后再进行运算，如果遇到`+`，js会尝试将数字`toString()`，再进行字符串拼接。因此，在进行字符串和数字的混合运算时，一定要加括号

以上内容是隐式转换的一部分）

示例：

```js
'1' + 1; // '11'
1 - '1'; // 0
1 * '1'; // 1
4 * 'a'; // NaN
'b' + 2 * 3; // 'b6'
```

### 获得字符串的长度

我们可以使用`string.length`获取字符串的长度

```js
''.length; // 0
'1234567890'.length; // 10
```

### 获取字符串的某一项

我们可以使用`string[n]`来获取字符串的第`n+1`个字符

```js
'123456'[1]; // 2
'abcdefg'[4]; // e
```

### 字符串迭代

我们可以使用`for 循环`迭代字符串

```js
var str = '123467890';
for (var i = 0; i < str.length; i++) console.log(str[i]);
```

这样，我们就可以输出字符串的每一项了