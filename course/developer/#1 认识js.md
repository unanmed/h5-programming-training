# 第一章 第一节 认识js

## 编程语言概述

编程语言是一种用于控制计算机的人工语言。特别的，javascript 被认为是高级编程语言，这意味着它是人类可读的。

例如说，以下是一个简单的 javascript 语句：

```js
console.log('hello world'); // hello world
```

如果你能看懂这些单词的话，应该大致能理解这个语句的意思（翻译成中文大概是：`控制台.记录日志('你好 世界') // 你好 世界`）。

### 语法高亮

想必你已经注意到，我们上面展示的代码中，不同字符呈现出不同的颜色，这被称为`语法高亮`，这一功能可以使我们简单的分辨出一段代码中不同的语法元素。我们的课程和练习中统一采用 VSCode Light Plus 风格，你可以记忆每种词法元素的对应的颜色，这有助于发现代码中的语法错误。

### 运行代码

初学者会碰到的第一个问题是在哪里才能运行js，当然我们假定本讲义的学习者都接触过样板，在样板中你可以在事件的脚本语句块，以及脚本编写中编写js（大部分学习者的目的也是编写这些东西）。不过如果你希望得到立即的反馈，你可以在电脑浏览器中按下 `F12` 调出开发者工具，并在控制台选项卡中编写语句，按下回车即可执行你的语句，并给出其结果。除此之外，你也可以在 codelab 提供的编辑器中执行语句。

### `[试一试]`

现在，你可以打开控制台测试刚刚我们展示的语句。

### 输出内容

现在我们来简单讲述一下上面的语句，它的作用是在控制台中记录`()`中的内容，这个语句在编写程序中非常有用，可以帮助你了解程序的运行情况和结果，

### 注释语句

也许你已经注意到了，我们刚刚讲的内容没提及后半部分`// 你好 世界`，实际上，这个 `//` 开始的部分被认为是`注释`，这一部分代码没有实际的作用，是供程序员阅读的，注释的语法相当简单：一个注释以`//` 开始，到所在行结束：

```js
console.log("hello") // 不会影响下一行
console.log("world")
```

在本教程中，每行后跟的注释代表该行在控制台中的输出，或者该行语句的`结果`。

## 字面量

### 字符串字面量

在以上的示例中，我们使用 `'hello world'` 来描述我们要输出的内容，如果你仔细观察，会发现这串文字比起实际输出的内容，在前后各多了一个引号，在js中，我们把一对引号包裹的文字称为字符串字面量。所谓的字面量，指的是"一个量的值和它看起来的内容一样"，除了字符串字面量，在js中常用的还有数字字面量和布尔字面量等，我们将在下面介绍这些字面量。

除了`'`，我们也可以使用`"`，这两者没有区别，但是不能混用。

```js
'这个可以'
"这个也可以"
"这个不可以'
```

注意，中文的引号是不行的，如果你发现程序无法运行，试着检查下你的引号是否正确吧。

如果你想要在一个由双引号包裹的字符串中添加双引号，会产生语法错误：

```js
"注意"不是“"
```

js 提供了一种被称为转义的方法来解决这个问题，具体来说，在双引号前面加一个转义符号 `\`，就能正常工作，像这样：

```js
"注意\"不是“"
```

除了 `"` 和 `'` 之外，还有一些其他符号也可以转义，最常见的是 `\n` 代表换行(n = newLine) 

### 数字字面量

数字字面量和一个正常的，我们所知的数字类似，例如说`12`就是一个合法的数字字面量，数字也可以加小数点，例如`1.1`。

### 布尔字面量

布尔是一个我们不太熟悉的概念，实际上它指的就是 `正确` / `错误`，在js中，其对应的字面量分别为 `true` / `false`。

## 调用API

在刚刚的语句中，另外一个值得一提的部分是API调用，`console.log` 可以被认为是一个API，它的作用是向控制台中记录一系列内容。后面的 `('hello world')` 就是被记录的内容，特别的， `()` 是一种用于调用API的语法（而不是没有意义的字符），被括号包裹的量会被传入，称为参数。

> API 即应用程序接口，是应用程序一系列以编程方式提供的功能

### `[试一试]`

样板提供了一个与 `console.log` 相当类似的api，可以在地图左上角显示传入的参数：

```js
core.drawTip("hello world")
```

### 多个参数

如果你需要在调用API时传入多个参数，需要用空格分割它们，像这样：

```js
console.log(1, 2, 3)
```

## 变量

### 概念

变量，顾名思义，就是可以变的量，每个变量就像一个存储值的容器，你可以将值放到容器中，或者从中获取值，这给予编写程序很大的自由度。

### 变量的声明

在js中，声明变量十分简单，只要使用 `let` 就行了，一个简单的示例如下：

```js
let x;
```

在这段代码中，我们声明了一个名为 `x` 的变量，在随后的代码中，我们可以用`x`这个词引用我们声明的变量，例如说这样：

```js
let x;
console.log(x); // undefined
```

刚声明的变量的值默认是 `undefined`，如果我们希望它拥有一个初始值，可以用 `=` 号进行赋值，像这样：

```js
let x = 0;
console.log(x); // 0
```

我们也可以一次声明多个变量，并进行赋值：

```js
let a, b;
let c = 1, d = 1;
```

如果你声明了一个已有的变量，程序会报错并中断运行：

```js
let a;
let a; // Uncaught SyntaxError: Identifier 'a' has already been declared
```

### 变量命名规则

变量的名称有一定的规范，一些特定的名称不能被用于变量名，具体来说：

 - 变量的首字母必须是英语的大小写字符，下划线，或者其他语言的字符，不能是数字或者符号。
 - 变量的其他字母可以是各种字符，数字，但是不能是符号或者空白。

例如说：

```js
let 2b; // 错误的命名，首字母不能是数字
let b-b; // 错误的命名，变量名不能包含'-'
let abc_efg; // 正确的命名
```

### `[试一试]`

想几个正确的变量名

#### 关键字和保留字

除了上面的规则之外，一些特殊的词不能被用作变量名，这些词被称为关键字 / 保留字，关键字指的是 js 中拥有特殊作用的词，例如说我们之前提过的 `typeof` 和 `let`，保留字则是目前还没有特殊功能，但是将来可能会被用到的词汇，我们将在接下来的课程中学会大部分关键字，因此不用费心记忆它们，如果你的变量名被提示不合法，换一个即可。

#### 命名风格建议

虽然你可以使用任意合法的变量名称，但是为了阅读方便，人们往往会遵循一些命名上的规范，在 js 中我们通常采用"驼峰式命名法"，具体来说，这种命名法要求变量的首字母小写，之后每个单词的首字母大写，这样可以轻松的分辨每个单词，像这样：

```js
let showShowWay; // 正确的命名
let showSHOWWAY; // 错误的命名，每个单词只有首字母需要大写
```

在js中，除特殊情况外，变量名可以是任意unicode字符（不能数字开头，不能使用运算符等），这意味着，你可以使用中文当做变量名，但是这么干是不规范的。

> 相比于中文，更糟糕的是拼音，所以如果你现在主要使用拼音来当变量名的话，还是试试中文吧，，，

### `[试一试]`

想几个风格正确的变量名

## 运算符

### 概念

运算符是一系列用于运算的符号，在小学中我们就学过 `+` 和 `-` 这样的运算符。在 js 中，运算符的概念被大幅度扩充了，以下我们一一介绍所有的运算符：

### 赋值运算符

最重要的运算符是赋值运算符，在js中我们用 `=` 来表示，它的作用是将一个值赋予给一个变量，像这样：

```js
let x;
x = 5;
console.log(x); // 5
```

注意，赋值运算符的左侧必须是变量，因为它要接收右侧的值，像这样的写法是错误的：

```js
1 = 2; // 不，这并不是相等，而是错误运用的赋值符号
```

### 算术运算符

随后则是算数运算符，算术运算符是用于计算数字类型值的运算符（大家应该都有相关的基础知识），其中 `+`，`-` 与我们所知的运算符一样，而乘号和除号则被写为 `*` `/` （这是因为常用键盘上没有 `×` 和 `÷`）还有一些其他的运算符，例如说取余符号 `%` ，幂运算符号 `**`，你以像这样运用它们。

```js
1 + 2 // 3 <- 我们采用和 console.log 类似的方式来描述运算的结果
1 - 2 // -1
1 * 2 // 2
1 / 2 // 0.5
1 % 2 // 1
2 ** 3 // 8 这个运算符是后期才引入js的，有兼容性问题，因此造塔时无法使用。
```

当变量参与运算的时候，往往会出现这样的形式：

```js
let aVeryLongletiableName = 1;
aVeryLongletiableName = aVeryLongletiableName + 2;
```

针对这种情况，为了减少键盘使用量，js提供了简写的形式，像这样：

```js
let aVeryLongletiableName = 1;
aVeryLongletiableName += 2;
```

你可以使用 `+=` `-=` `*=` `/=` `%=` `**=` 来简化 `a = a + b` 这种形式，除此之外js还提供了自增和自减的运算符`++` 和 `--`，相当于 `a = a + 1`，`a = a - 1`。

除此以外，js 还提供了用于比较数值大小的运算符，其中 `<` 和 `>` 是我们熟悉的符号，而大于等于和小于等于则写作 `>=` `<=` （注意等号的位置在后面），这四个运算符的返回值都是布尔值。

```js
1 > 2 // false
1 < 2 // true
2 < 2 // false
1 >= 2 // false
2 <= 2 // true
```

特别的，你可以对字符串使用`+`号，表示连接两个字符串，`+=` 也同样奏效。

```js
"h5" + "nb" // h5nb
```

### 比较运算符

在 js 中，我们用相等运算符(`==`) 或全等运算符(`===`) 来判断两个值是否相等（而不是 `=`，因为 `=` 已经被赋值运算符占用了）。
这两个运算符会比较两侧的值，然后给出一个布尔值作为结果。

```js
1 === 1; // true
1 === 3; // false
```

一般来说，我们推荐使用 `===` 号，它和 `==` 号的区别是后者会允许一些特别的转换，例如：

```js
1 == true; // true
1 === true; // false

1 == "1"; // true
1 === "1"; // false
```

完整的转换规则异常的复杂，大多数人并不完全了解其细节，因此，代码往往会产生编写者意想之外的效果，为了杜绝这种危险，请尽量避免使用 `==` 符号。

相对的，js 中使用不等于运算符(`!=`) 或严格不相等运算符(`!==`) 判断两个变量是否不相等，基于同样的理由，我们推荐使用 `!==` 。

### 逻辑运算符

逻辑运算符时用来处理布尔值的运算的，js 中提供 `&&`，`||`， `!` 三种逻辑运算符。

对于与运算符 `&&` 来说，如果两侧的值都是 `true` 则返回 `true`，否则返回 `false`。

```js
1 + 2 === 3 && 1 * 2 === 2; // true
```

或运算符 `||` 和与运算符相反，仅当两侧的值都是 `false` 时返回 `false` 否则返回 `true`。

```js
1 + 2 === 3 || 1 + 1 === 3; // true
```

非运算符 `!` 则是一个单目运算符，它将`true` 变为 `false` 或者逆过来：

```js
!(1 + 1 === 3); // true
```

### 运算符优先级

我们都知道， `1 + 1 * 2` 的结果不是 4 而是 3，而在js中，运算符的数量更多，其优先级也相对复杂，一个常见的结论如下：

算术运算符 > 比较运算符 > 逻辑运算符

如果不是很确定运算符之间的优先级，可以通过加括号的方式来确保符合自己的预期。

完整的优先级列表：https://www.w3school.com.cn/js/js_arithmetic.asp

### `[试一试]`

完成一段伤害计算代码

提示 `Math.floor` 可以用于下取整

```js
// 主角
let atk = 100;
let def = 50;

// 敌人
let mon_hp = 200;
let mon_atk = 70;
let mon_def = 70;

// 尝试计算以下值
let per_damage // 怪物一回合能对主角造成的伤害
let hero_per_damage // 主角一回合能对怪物造成的伤害
let turn // 回合数
let damage // 主角受到的总伤害
```

## 语法建议

### 分号

我们刚刚列出的大部分语句后都有分号，分号用于分割几个语句，例如说：

```js
let a = 0; a++; // 正确
let a = 0 a++; // 错误
```

换行一定程度上能起到类似的效果，因此有些人选择不写分号，不过有一些特殊的情况下，换行并不能正确的分割语句，因此加分号仍然是一个好习惯。
